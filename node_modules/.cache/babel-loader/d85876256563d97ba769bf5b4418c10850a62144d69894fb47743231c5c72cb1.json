{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getMessages, uploadMessages } from \"@/api/mocky\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nVue.use(Vuex);\nexport function state() {\n  return {\n    messages: [],\n    isFormValid: false\n  };\n}\nexport const mutations = {\n  setMessages(state, data) {\n    state.messages = data;\n  },\n  addMessage(state) {\n    if (state.messages.length === 0) {\n      state.messages.push({\n        id: 4,\n        voice: \"\",\n        text: \"\"\n      });\n    } else {\n      const newId = state.messages[state.messages.length - 1].id + 1;\n      state.messages.push({\n        id: newId,\n        voice: \"\",\n        text: \"\"\n      });\n    }\n  },\n  deleteMessage(state, {\n    id\n  }) {\n    const index = state.messages.findIndex(message => message.id === id);\n    state.messages.splice(index, 1);\n  },\n  updateMessageVoice(state, {\n    id,\n    value\n  }) {\n    const indexToUpdate = state.messages.findIndex(message => message.id === id);\n    state.messages[indexToUpdate].voice = value;\n  },\n  updateMessageText(state, {\n    id,\n    value\n  }) {\n    const indexToUpdate = state.messages.findIndex(message => message.id === Number(id));\n    state.messages[indexToUpdate].text = value;\n  },\n  checkFormValid(state) {\n    const validValues = state.messages.map(message => message.voice !== \"\" && message.text !== \"\");\n    const isValid = !validValues.includes(false);\n    state.isFormValid = isValid;\n  }\n};\nexport const actions = {\n  async getMessages({\n    commit\n  }) {\n    const data = await getMessages();\n    commit(\"setMessages\", data);\n    commit(\"checkFormValid\");\n  },\n  async uploadMessages({\n    state\n  }) {\n    const status = await uploadMessages(state.messages);\n    if (status === 200) {\n      alert(\"Messages uploaded successfully\");\n    } else {\n      alert(\"An error has occured while uploading the data, please try again later.\");\n    }\n  }\n};\nexport default new Vuex.Store({\n  state,\n  mutations,\n  actions\n});","map":{"version":3,"names":["getMessages","uploadMessages","Vue","Vuex","use","state","messages","isFormValid","mutations","setMessages","data","addMessage","length","push","id","voice","text","newId","deleteMessage","index","findIndex","message","splice","updateMessageVoice","value","indexToUpdate","updateMessageText","Number","checkFormValid","validValues","map","isValid","includes","actions","commit","status","alert","Store"],"sources":["/Users/ismael/Documents/personal/frontend-challenge/unbabel-test/src/store/index.js"],"sourcesContent":["import { getMessages, uploadMessages } from \"@/api/mocky\";\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nVue.use(Vuex);\n\nexport function state() {\n  return {\n    messages: [],\n    isFormValid: false,\n  };\n}\n\nexport const mutations = {\n  setMessages(state, data) {\n    state.messages = data;\n  },\n  addMessage(state) {\n    if (state.messages.length === 0) {\n      state.messages.push({\n        id: 4,\n        voice: \"\",\n        text: \"\",\n      });\n    } else {\n      const newId = state.messages[state.messages.length - 1].id + 1;\n      state.messages.push({\n        id: newId,\n        voice: \"\",\n        text: \"\",\n      });\n    }\n  },\n  deleteMessage(state, { id }) {\n    const index = state.messages.findIndex((message) => message.id === id);\n    state.messages.splice(index, 1);\n  },\n  updateMessageVoice(state, { id, value }) {\n    const indexToUpdate = state.messages.findIndex(\n      (message) => message.id === id\n    );\n    state.messages[indexToUpdate].voice = value;\n  },\n  updateMessageText(state, { id, value }) {\n    const indexToUpdate = state.messages.findIndex(\n      (message) => message.id === Number(id)\n    );\n    state.messages[indexToUpdate].text = value;\n  },\n  checkFormValid(state) {\n    const validValues = state.messages.map(\n      (message) => message.voice !== \"\" && message.text !== \"\"\n    );\n    const isValid = !validValues.includes(false);\n    state.isFormValid = isValid;\n  },\n};\n\nexport const actions = {\n  async getMessages({ commit }) {\n    const data = await getMessages();\n    commit(\"setMessages\", data);\n    commit(\"checkFormValid\");\n  },\n  async uploadMessages({ state }) {\n    const status = await uploadMessages(state.messages);\n    if (status === 200) {\n      alert(\"Messages uploaded successfully\");\n    } else {\n      alert(\n        \"An error has occured while uploading the data, please try again later.\"\n      );\n    }\n  },\n};\n\nexport default new Vuex.Store({\n  state,\n  mutations,\n  actions,\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}